<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Like Charlie — Actions</title>
<style>
  :root{--border:rgba(255,255,255,.12);--ink:#e6eefc;--muted:#9fb3d1;}
  body{margin:0;background:#0b1220;color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  header{position:sticky;top:0;background:#0c1530cc;backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
  nav{display:flex;gap:14px;align-items:center;padding:10px 16px}
  nav a{color:var(--ink);text-decoration:none;padding:6px 10px;border-radius:8px}
  nav a:hover{background:#1a2750}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  .actions-hero{border:1px solid var(--border);border-radius:16px;background:#0f1a33;padding:16px;margin-bottom:14px}
  .muted{color:var(--muted)}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 14px}
  .chip{padding:6px 10px;border:1px solid var(--border);border-radius:999px;cursor:pointer}
  .chip.active{background:#162552}
  .section{margin:12px 0 18px}
  .section h2{margin:0 0 8px 0;font-size:18px}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
  .card{border:1px solid var(--border);border-radius:14px;padding:12px;background:#0f1a33}
  .card h3{margin:0 0 6px 0;font-size:16px}
  .btn{display:inline-block;margin-top:8px;padding:8px 12px;border:1px solid var(--border);border-radius:10px;color:#fff;text-decoration:none;background:#162552}
  footer{opacity:.8;font-size:.9rem;margin-top:24px}
  .srch{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:#0c1630;color:var(--ink)}
</style>
</head>
<body>
<header>
  <nav class="wrap">
    <a href="/" class="brand">← Back to Home</a>
    <span style="flex:1"></span>
    <a href="/">Home</a>
    <a href="/actions.html">Actions</a>
  </nav>
</header>

<main class="wrap">
  <section class="actions-hero">
    <h1>Do Good. Count It. Grow Influence, like Charlie</h1>
    <p class="muted" style="white-space:pre-line">1. Do one small good action like Charlie - pick from the list below
2. make a quick post about what you did and invite 3 friends to choose to do a good action like Charlie also, 
3. paste your link from your social media post on the homepage to complete the challenge. 
"Make doing one small good thing often a pattern, not a one-off."</p>
    <input id="search" class="srch" placeholder="Search actions…">
    <div id="chips" class="toolbar"></div>
  </section>

  <div id="actions"></div>
</main>

<footer class="wrap">
  <p>Not affiliated with charliechallenge.org.</p>
</footer>

<script>
(async function(){
  const data = await fetch('/data/actions.json').then(r=>r.json()).catch(()=>({items:[]}));
  const items = data.items||[];

  // Build category list from items
  const cats = [...new Set(items.map(i=>i.category||'Other'))];
  const chips = document.getElementById('chips');
  const search = document.getElementById('search');
  const root = document.getElementById('actions');

  // Chips
  const all = document.createElement('span'); all.className='chip active'; all.textContent='All'; all.dataset.cat='All'; chips.appendChild(all);
  cats.forEach(c=>{ const s=document.createElement('span'); s.className='chip'; s.textContent=c; s.dataset.cat=c; chips.appendChild(s); });

  function card(it){
    const enc = encodeURIComponent;
    const link = `/?action=${enc(it.title)}&desc=${enc(it.desc)}&focus=post#step1`;
    return `<div class="card">
      <h3>${it.title}</h3>
      <p class="muted">${it.desc}</p>
      <a href="${link}" class="btn">Do this</a>
    </div>`;
  }

  function render(filter='All', q=''){
    root.innerHTML='';
    const query = (q||'').toLowerCase();
    cats.concat('Other').forEach(cat=>{
      const list = items.filter(i=>{
        const inCat = (filter==='All' ? true : (i.category===filter));
        const match = !query || i.title.toLowerCase().includes(query) || i.desc.toLowerCase().includes(query);
        return inCat && match;
      });
      if(!list.length) return;
      const sec = document.createElement('section'); sec.className='section';
      sec.innerHTML = `<h2>${cat}</h2><div class="grid">${list.map(card).join('')}</div>`;
      root.appendChild(sec);
    });
  }

  chips.addEventListener('click', e=>{
    const c=e.target.closest('.chip'); if(!c) return;
    chips.querySelectorAll('.chip').forEach(x=>x.classList.remove('active')); c.classList.add('active');
    render(c.dataset.cat, search.value);
  });
  search.addEventListener('input', ()=> {
    const active = chips.querySelector('.chip.active')?.dataset.cat || 'All';
    render(active, search.value);
  });

  render();
})();
</script>
</body>
</html>
