<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Render Share Image</title>
<style>
  body{margin:0;background:#0b1220;color:#e6eefc;font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
  .wrap{max-width:1000px;margin:0 auto;padding:20px}
  .panel{background:#0f1a33;border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px}
  label{display:block;margin:10px 0 6px;font-weight:600}
  input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#0c1630;color:#e6eefc}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  canvas{max-width:100%;background:#000;border-radius:12px}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.12);text-decoration:none;color:#fff;background:#162552}
</style>
</head>
<body>
<main class="wrap">
  <h1 style="margin-top:0">Render Share Image</h1>
  <p class="muted">Choose a size, tweak text, pick a background, then click <b>Download PNG</b>.</p>

  <div class="panel">
    <div class="row">
      <label>Size</label>
      <select id="size">
        <option value="1080x1080">Square (1080×1080)</option>
        <option value="1080x1350">Portrait 4:5 (1080×1350)</option>
        <option value="1920x1080">Landscape 16:9 (1920×1080)</option>
      </select>
    </div>

    <label>Title</label>
    <input id="title" placeholder="One Small Good Thing">

    <label>Subtitle</label>
    <input id="subtitle" placeholder="Join me + invite 3 friends">

    <label>Footer</label>
    <input id="footer" placeholder="Like Charlie • #LiveLikeCharlie">

    <label>Background</label>
    <select id="bgPreset">
      <option value="patriot">Patriotic gradient</option>
      <option value="sunset">Sunset gradient</option>
      <option value="dark">Dark gradient</option>
    </select>
    <div class="row">
      <input type="file" id="bgFile" accept="image/*">
      <button id="render" class="btn">Render</button>
      <a id="download" class="btn" download="likecharlie.png">Download PNG</a>
      <a href="/" class="btn">← Back to Home</a>
    </div>
  </div>

  <div class="panel" style="margin-top:12px">
    <canvas id="c"></canvas>
  </div>
</main>

<script src="/share_image.js"></script>
<script>
  (function(){
    // Prefill from query
    const q=new URLSearchParams(location.search);
    if(q.get('title'))    document.getElementById('title').value=q.get('title');
    if(q.get('subtitle')) document.getElementById('subtitle').value=q.get('subtitle');
    if(q.get('footer'))   document.getElementById('footer').value=q.get('footer');

    document.getElementById('render').addEventListener('click', window.renderShareImage);
    document.getElementById('download').addEventListener('click', window.downloadShareImage);
  })();
</script>
</body>
</html>
